# ğŸ¬ SOOP ì§€í”¼í‹° ì±„íŒ… ëª¨ë‹ˆí„°ë§ ë´‡

SOOP(ì•„í”„ë¦¬ì¹´TV) ë°©ì†¡ì˜ ì±„íŒ…ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ì—¬ ë°ˆ íŒ¨í„´ì„ ê°ì§€í•˜ê³  í†µê³„ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ë´‡ì…ë‹ˆë‹¤.

## ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥

### 1. ë°©ì†¡ ìƒíƒœ ìë™ ê°ì§€

- ì•„í”„ë¦¬ì¹´TV APIë¡œ LIVE ìƒíƒœ ìë™ í™•ì¸
- í´ë§ ì£¼ê¸°: ë°©ì†¡ ì¤‘ 60ì´ˆ, ë°©ì†¡ ì¢…ë£Œ ì§í›„ 9ë¶„ ì´ë‚´ 180ì´ˆ(ë¦¬ë°© ëŒ€ë¹„), í”¼í¬ íƒ€ì„(16~18ì‹œ) 180ì´ˆ, ê¸°ë³¸ 600ì´ˆ
- ë°©ì†¡ ì‹œì‘/ì¢…ë£Œ ì‹œ ìë™ ì„¸ì…˜ ê´€ë¦¬

### 2. ë°ˆ íŒ¨í„´ ê°ì§€ (5ì¢…ë¥˜)

| ë°ˆ           | íŒ¨í„´                                  | ì˜ˆì‹œ                   |
| ------------ | ------------------------------------- | ---------------------- |
| **ì§€ì°½**     | `ì§€[ã…¡\s~-]*ì°½`                       | ì§€ì°½, ì§€~ì°½, ì§€ã…¡ì°½    |
| **ì„¸ì‹ **     | `ì„¸[ã…¡\s~-]*ì‹ `                       | ì„¸ì‹ , ì„¸~ì‹             |
| **ì§œì¥ë©´**   | `ì§œ[ã…¡\s~-]*ì¥[ã…¡\s~-]*ë©´`            | ì§œì¥ë©´, ì§œ~ì¥ë©´        |
| **ã„·ã…ˆã„¹ã„±** | `ã„·[ã…¡\s~-]*ã…ˆ[ã…¡\s~-]*ã„¹[ã…¡\s~-]*ã„±` | ã„·ã…ˆã„¹ã„±               |
| **ã…†ã„·ã„´**   | ã…†ã„·ã„´ / ìŒ‹ë‹¤ë‚˜ / ìŒŒë‹¤ë‚˜              | ã…†ã„·ã„´, ìŒ‹ë‹¤ë‚˜, ìŒŒë‹¤ë‚˜ |

### 3. Wave(ë¬¼íƒ€ê¸°) ê°ì§€

| ì¡°ê±´      | ê°’        |
| --------- | --------- |
| ì§€ì† ì‹œê°„ | 20ì´ˆê°„    |
| ë©”ì‹œì§€ ìˆ˜ | 20ê°œ ì´ìƒ |
| ê°„ê²© íƒ€ì„ì•„ì›ƒ | 10ì´ˆ (ì´ ì‹œê°„ ë™ì•ˆ ë°ˆ ë¯¸ê°ì§€ ì‹œ streak ë¦¬ì…‹) |
| ì¿¨ë‹¤ìš´    | 60ì´ˆ      |

### 4. Hot Moment(ê¸‰ì¦ êµ¬ê°„)

**í•˜ë‚˜ì˜ Wave = í•˜ë‚˜ì˜ Hot Moment.** Waveê°€ í™•ì •ë  ë•Œ(20ì´ˆê°„ 20ê°œ ì´ìƒ) ê·¸ ì‹œì ì„ Hot Momentë¡œ ê¸°ë¡í•©ë‹ˆë‹¤. ë°©ì†¡ ì¢…ë£Œ ì‹œ `data/hot_moments/YYYY-MM-DD.json`ì— ì €ì¥ë©ë‹ˆë‹¤.

### 5. ë°ì´í„° ì €ì¥

- ë°©ì†¡ ì¢…ë£Œ ì‹œ `data/hot_moments/YYYY-MM-DD.json`ì— Hot Moments ë° ì„¸ì…˜ë³„ ë°ˆ ì´ íšŸìˆ˜ ì €ì¥
- `/stats`ì˜ `history`ëŠ” ë©”ëª¨ë¦¬ ìƒì˜ ë°©ì†¡ ê¸°ë¡(ìµœëŒ€ 50ê±´, Wave íšŸìˆ˜ ê¸°ì¤€)

---

## ğŸŒ API ì—”ë“œí¬ì¸íŠ¸

| ì—”ë“œí¬ì¸íŠ¸            | ì„¤ëª…                                                       |
| --------------------- | ---------------------------------------------------------- |
| `GET /`               | ë´‡ ì‹¤í–‰ ìƒíƒœ í™•ì¸                                          |
| `GET /health`         | í—¬ìŠ¤ì²´í¬                                                   |
| `GET /stats`          | í˜„ì¬ ì„¸ì…˜ í†µê³„ ì¡°íšŒ (ë°ˆë³„ Wave/ì´ ê°ì§€ íšŸìˆ˜, Hot Moments, ë°©ì†¡ ê¸°ë¡) |
| `GET /history`        | Hot Momentsê°€ ì €ì¥ëœ ë‚ ì§œ ëª©ë¡ ì¡°íšŒ (`data/hot_moments/` ê¸°ì¤€) |
| `GET /history/{date}` | íŠ¹ì • ë‚ ì§œ Hot Moments ì¡°íšŒ (ì„¸ì…˜ë³„Â·ë‚ ì§œë³„ ë°ˆ ì´ íšŸìˆ˜ í¬í•¨) |

### `/stats` ì‘ë‹µ í•„ë“œ

- `status`: `"LIVE"` | `"WAITING"`
- `broadcast_title`, `started_at`: ë°©ì†¡ ì œëª©, ë°©ì†¡ ì‹œì‘ ì‹œê°(ë°©ì†¡ ì¤‘ì¼ ë•Œë§Œ ê°’ ìˆìŒ)
- ë°ˆë³„: `ji_chang_wave_count`, `total_ji_chang_chat_count`, `sesin_*`, `jjajang_*`, `djrg_*`, `sdn_*`
- `last_detected_at`: ë§ˆì§€ë§‰ ë°ˆ ê°ì§€ ì‹œê°
- `hot_moments`: í˜„ì¬ ì„¸ì…˜ì˜ Hot Moment ëª©ë¡ (Wave í™•ì • ì‹œì )
- `history`: ë©”ëª¨ë¦¬ ìƒ ë°©ì†¡ ê¸°ë¡ (ë‚ ì§œ, ì œëª©, ë°ˆë³„ Wave íšŸìˆ˜ `total_ji_chang`~`total_sdn`)

### `/stats` ì‘ë‹µ ì˜ˆì‹œ

```json
{
  "status": "WAITING",
  "broadcast_title": "ë°©ì†¡ ì¤€ë¹„ ì¤‘",
  "started_at": null,
  "ji_chang_wave_count": 0,
  "total_ji_chang_chat_count": 0,
  "sesin_wave_count": 0,
  "total_sesin_chat_count": 0,
  "jjajang_wave_count": 0,
  "total_jjajang_chat_count": 0,
  "djrg_wave_count": 0,
  "total_djrg_chat_count": 0,
  "sdn_wave_count": 0,
  "total_sdn_chat_count": 0,
  "last_detected_at": null,
  "hot_moments": [],
  "history": [
    {
      "date": "2026-02-07",
      "title": "ë°©ì†¡ ì œëª©",
      "total_ji_chang": 7,
      "total_sesin": 0,
      "total_jjajang": 0,
      "total_djrg": 0,
      "total_sdn": 0
    }
  ]
}
```

### `/history/{date}` ì‘ë‹µ êµ¬ì¡°

- `date`, `last_updated`: ì¡°íšŒ ë‚ ì§œ, íŒŒì¼ ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°
- `sessions`: í•´ë‹¹ ë‚ ì§œì— ì €ì¥ëœ ë°©ì†¡ ì„¸ì…˜ ëª©ë¡
  - ê° ì„¸ì…˜: `broadcast_title`, `saved_at`, `hot_moments`, `total_ji_chang`, `total_sesin`, `total_jjajang`, `total_djrg`, `total_sdn`
- `total_ji_chang`, `total_sesin`, `total_jjajang`, `total_djrg`, `total_sdn`: í•´ë‹¹ ë‚ ì§œ ì „ì²´ í•©ê³„(ëª¨ë“  ì„¸ì…˜)

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ë¡œì»¬ ì‹¤í–‰

```bash
python soop_chat_ji.py
```

ì„œë²„ëŠ” `http://0.0.0.0:8000`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### Fly.io ë°°í¬

```bash
fly deploy
```

---

## ğŸ› ï¸ VOD ë§í¬ ìƒì„±ê¸°

Hot Moments ì‹œê°„ì„ ê¸°ë°˜ìœ¼ë¡œ VOD íƒ€ì„ìŠ¤íƒ¬í”„ ë§í¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

### ì‚¬ìš©ë²•

```bash
python vod_link_generator.py
```

### ì„¤ì • íŒŒì¼

- `data/timestamp.json`: ë°ˆ ê°ì§€ ë°ì´í„° (VOD ë§í¬ ìƒì„± ì‹œ ì°¸ì¡°)
- `data/vod_config.json`: VOD ì„¸ê·¸ë¨¼íŠ¸ ì„¤ì •

---

## ğŸ“¦ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
soop-chatting-crawling/
â”œâ”€â”€ soop_chat_ji.py          # ë©”ì¸ ë´‡ (ì±„íŒ… ëª¨ë‹ˆí„°ë§ + FastAPI)
â”œâ”€â”€ vod_link_generator.py    # VOD ë§í¬ ìƒì„±ê¸°
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ hot_moments/         # ë‚ ì§œë³„ Hot Moments JSON (YYYY-MM-DD.json)
â”‚   â”œâ”€â”€ timestamp.json       # ë°ˆ ê°ì§€ ë°ì´í„° (VOD ìƒì„±ìš©)
â”‚   â””â”€â”€ vod_config.json      # VOD ì„¤ì •
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ fly.toml
â””â”€â”€ README.md
```

---

## ğŸ“‹ ê¸°ìˆ  ìŠ¤íƒ

- **ì–¸ì–´**: Python 3.11+
- **í”„ë ˆì„ì›Œí¬**: FastAPI
- **ë¹„ë™ê¸°**: asyncio, websockets
- **í˜¸ìŠ¤íŒ…**: Fly.io (ë¬´ë£Œ í‹°ì–´)

---

## ğŸ”§ ì„¤ì •ê°’ (ì½”ë“œ ê¸°ì¤€)

| í•­ëª©                     | ê°’                                           |
| ------------------------ | -------------------------------------------- |
| Wave ì¡°ê±´                | 20ì´ˆê°„ 20ê°œ ì´ìƒ + 60ì´ˆ ì¿¨ë‹¤ìš´               |
| Wave streak ê°„ê²© íƒ€ì„ì•„ì›ƒ | 10ì´ˆ                                         |
| Hot Moment               | Wave í™•ì • ì‹œ 1ê±´ ê¸°ë¡ (ë™ì¼ ì¡°ê±´)            |
| í´ë§ ì£¼ê¸° (ë°©ì†¡ ì¤‘)      | 60ì´ˆ                                         |
| í´ë§ ì£¼ê¸° (ë°©ì†¡ ì¢…ë£Œ ì§í›„) | 180ì´ˆ (9ë¶„ ì´ë‚´)                             |
| í´ë§ ì£¼ê¸° (í”¼í¬ 16~18ì‹œ) | 180ì´ˆ                                        |
| í´ë§ ì£¼ê¸° (ê¸°ë³¸)         | 600ì´ˆ                                        |
| ë°©ì†¡ ê¸°ë¡ ìµœëŒ€ ê±´ìˆ˜      | 50ê±´                                         |

---

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License
